:80 {
	# Resolve the root directory for the app
	root * /app/public

	# CORS headers
	header {
		# Allow all origins (you can restrict this to specific domains if needed)
		Access-Control-Allow-Origin "*"
		# Allow common methods
		Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS"
		# Allow common headers
		Access-Control-Allow-Headers "Content-Type, Authorization"
		# Allow credentials if needed
		# Access-Control-Allow-Credentials "true"
	}

	# Handle OPTIONS requests for CORS preflight
	@options {
		method OPTIONS
	}
	respond @options 204

	# Provide Zstd and Gzip compression
	encode zstd gzip

	# Allow caddy to serve static files
	file_server

	# Enable PHP-FPM
	php_fastcgi php:9000
}